<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loan application</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">

    <link rel="stylesheet" href="loanapplication.css">
</head>

<body>
    <div class="main">
        <section>
            <h1>Star Bank</h1>
            <h6>RBI certified</h6>
            <h3>Loan application</h3>
            <form action="verfication.html" id="lform">
                
                <div class="form-group row">
                    <label for="fname" class="col-sm-4 col-form-label">First Name</label>
                    <div class="col-sm-8">
                      <input type="text" class="fname" id="fname" placeholder="First Name">
                    </div>
                  </div>    
                <div class="form-group row">
                    <label for="lname" class="col-sm-4 col-form-label">Last Name</label>
                    <div class="col-sm-8">
                      <input type="text" class="lname" id="lname" placeholder="Last Name">
                    </div>
                  </div>    
                <div class="form-group row">
                    <label for="email" class="col-sm-4 col-form-label">Email-ID</label>
                    <div class="col-sm-8">
                      <input type="text" class="email" id="email" placeholder="Email-ID">
                    </div>
                  </div>    
                <div class="form-group row">
                    <label for="pan" class="col-sm-4 col-form-label">PAN Number</label>
                    <div class="col-sm-8">
                      <input type="text" class="pan" id="pan" placeholder="PAN Number">
                    </div>
                  </div>    
                <div class="form-group row">
                    <label for="loan" class="col-sm-4 col-form-label">Loan amount</label>
                    <div class="col-sm-8">
                      <input type="number" class="loan" id="loan" placeholder="Loan amount(lack)">
                    </div>
                  </div>    
                <div class="form-group row">
                    <label for="yr" class="col-sm-4 col-form-label">Loan Tenure</label>
                    <div class="col-sm-8">
                      <input type="number" class="yr" id="yr" placeholder="Loan Tenure(year)">
                    </div>
                  </div>    
                  
                  
                  <button id="calculate" class="btn btn-primary" id="calemibtn">Calculate EMI</button>
                <h4 class="display-6">Estimated EMI: <span id="emi"></span></h4>
        

              <center>  <input type="submit" value="Submit Form"> </center>

            </form>
        </section>
        <section class="image">
            
                <img src="bank logo.png" alt="Logo Image " width="70%" height="70%">
            
        </section>
    </div>
<script>

    
    
    var form=document.querySelector('#lform')
     
    form.addEventListener('submit', function(e) {
        
        
        var fname=document.querySelector('#fname').value
        var lname=document.querySelector('#lname').value
        var email=document.querySelector('#email').value
        var pan=document.querySelector('#pan').value
        var loan=document.querySelector('#loan').value
        var yr=document.querySelector('#yr').value
        mainOtp=Math.round(Math.random()*10000+1234)
        
    
        var emailRegex = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;
        var regpan = /^[A-Z]{5}[0-9]{4}[A-Z]{1}/;


        if(fname==='' || lname==='' || email==='' || pan==='' || loan==='' ||yr==='')
        {
            alert('All Fields are Mandatory')
            e.preventDefault();
            
            
        }
        else if(email.match(emailRegex))
         {
             if(pan.match(regpan))
             {
                
                 alert('Your Otp is: '+ mainOtp)

             }
             else{
                 alert("Pan detail wrong")
                 e.preventDefault();
                 
                }
            }
            else
            {
                alert('Email Id Wrong')
                e.preventDefault();
        }
        
        
        localStorage.setItem('fname', fname)
        localStorage.setItem('email', email)
        localStorage.setItem('mainOtp', mainOtp)
    })





    var emibtn = document.querySelector('#calemibtn');
    emibtn.addEventListener('click', function(e){
      
      e.preventDefault();
      var loan=document.querySelector('#loan').value
        var yr=document.querySelector('#yr').value
        var emi=Math.round([loan*0.007*Math.pow((1+0.007),(yr*12))]/[Math.pow((1+0.007),(yr*12))-1])
        document.getElementById('emi').innerHTML='Rs '+ emi+'/- Per Month'


    })

    




</script>


</body>

</html>